!function(){"use strict";function e(e){return e?e.replaceAll(">","＞").replaceAll("<","＜"):""}var n=(e,n,t)=>new Promise((o,r)=>{var s=e=>{try{i(t.next(e))}catch(e){r(e)}},a=e=>{try{i(t.throw(e))}catch(e){r(e)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,a);i((t=t.apply(e,n)).next())});const t="servers.aceattorneyonline.com",o=window.location.protocol,r="masterlist",s=[];function a(n){let t=0,o="",r="";if(n.ws_port&&(t=n.ws_port,o="ws",r="http"),n.wss_port&&!window.navigator.userAgent.includes("Nintendo")&&(t=n.wss_port,o="wss",r="https"),0===t||""===o||""===r)return void console.warn(`Server ${n.name} has no websocket port, skipping`);const a=function(e){const n=new URL(window.location.href);n.protocol=e;const t=n.pathname.split("/");return t.pop(),n.pathname=t.join("/"),"/"!==n.pathname[n.pathname.length-1]&&(n.pathname+="/"),n.pathname+="client.html",n.href}(r),i=`${o}://${n.ip}:${t}`,c=n.name,l=`${a}?mode=watch&connect=${i}&serverName=${c}`,p=`${a}?mode=join&connect=${i}&serverName=${c}`;s.push(n),document.getElementById("masterlist").innerHTML+=`<details name="servers"><summary><p>${e(n.name)} (${n.players})</p><a class="button" href="${p}" target="_blank">Join</a><a class="button" href="${l}" target="_blank">Watch</a></summary><p>${e(n.description)}</p></details>`}s[-1]={name:"Localhost",description:"This is your computer on port 50001",ip:"127.0.0.1",players:0,online:"Localhost",ws_port:50001},function(){return n(this,null,function*(){const e=`${o}//${t}/servers`,n=yield fetch(e);if(!n.ok)return console.error(`Bad status code from masterserver. status: ${n.status}, body: ${n.body}`),document.getElementById("ms_error").style.display="block",function(){const e=localStorage.getItem(r)||"[]";return JSON.parse(e)}();const s=yield n.json(),a=[];for(const e of s){if(!e.name){console.warn(`Server ${e} has no name, skipping`);continue}if(!e.ip){console.warn(`Server ${e.name} has no ip, skipping`);continue}if(!e.description){console.warn(`Server ${e.name} has no description, skipping`);continue}const n={name:e.name,description:e.description,ip:e.ip,players:e.players||0,online:`Players: ${e.players}`};e.ws_port&&(n.ws_port=e.ws_port),e.wss_port&&(n.wss_port=e.wss_port),(n.ws_port||n.wss_port)&&a.push(n)}return localStorage.setItem(r,JSON.stringify(a)),a})}().then(e=>{!function(e){for(let n=0;n<e.length;n++)a(e[n])}(e)}),a(s[-1]),document.getElementById("clientinfo").innerHTML="Client version: 2.8.0",function(){return n(this,null,function*(){const e=`${o}//${t}/version`,n=yield fetch(e);return n.ok?yield n.text():(console.error(`Bad status code from masterserver version check. status: ${n.status}, body: ${n.body}`),"Unknown")})}().then(e=>{!function(e){document.getElementById("serverinfo").innerHTML=`Master server version: ${e}`}(e)})}();
//# sourceMappingURL=master.a96e75117fb4ec883c8b.bundle.js.map